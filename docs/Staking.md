# Solidity API

## Staking

### StakePosition

```solidity
struct StakePosition {
  uint256 amount;
  uint256 timestamp;
  uint256 rewardsPercentage;
  bool singleClaimed;
}
```

### REWARDS_DIVIDER

```solidity
uint256 REWARDS_DIVIDER
```

### STAKING_TERM

```solidity
uint256 STAKING_TERM
```

### rewardsPercentage

```solidity
uint256 rewardsPercentage
```

### availableRewards

```solidity
uint256 availableRewards
```

### tokenToStake

```solidity
contract IERC20 tokenToStake
```

### rewardToken

```solidity
contract IERC20 rewardToken
```

### tail

```solidity
mapping(address => uint256) tail
```

### head

```solidity
mapping(address => uint256) head
```

### stakeQueue

```solidity
mapping(address => mapping(uint256 => struct Staking.StakePosition)) stakeQueue
```

### constructor

```solidity
constructor(address _tokenToStake, address _rewardToken, uint256 _rewardsPercentage, uint256 _stakingTerm) public
```

Constructor

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _tokenToStake | address | Address of the staking token |
| _rewardToken | address | Address of the reward token |
| _rewardsPercentage | uint256 | Percentage of token to distribute as a reward             for the stakers |
| _stakingTerm | uint256 | Seconds that needs to pass from the stake to consider             the position eligible for rewards |

### stake

```solidity
function stake(uint256 _amount) external
```

Stake tokens

_Caller has to approve the transger of _amount staking tokens from
            its wallet to this contract_

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _amount | uint256 | Amount of tokens to stake |

### unstake

```solidity
function unstake() external
```

Unstake positions that are eligible for the rewards

### unstakeForced

```solidity
function unstakeForced() external
```

Unstake all positions (also ones not eligible for the rewards)

### unstakeSingle

```solidity
function unstakeSingle(uint256 _index) external
```

Unstake single position in the queue

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _index | uint256 | Index of the position in the queue |

### computeRewards

```solidity
function computeRewards(address _staker) external view returns (uint256)
```

Compute staking rewards for an address

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _staker | address | Address of which you want to compute rewards |

### computeRewardsSingle

```solidity
function computeRewardsSingle(address _staker, uint256 _index) external view returns (uint256)
```

Compute rewards for a single stake

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _staker | address | Address of which you want to compute rewards |
| _index | uint256 | Index of the stake position |

### addRewards

```solidity
function addRewards(uint256 _amount) external
```

Add rewards to the staking

_Caller has to approve the transfer of _amount reward tokens from its
            wallet to this contract_

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _amount | uint256 | Amount of rewards to add |

### updateRewardsPercentage

```solidity
function updateRewardsPercentage(uint256 _percentage) external
```

Update rewards percentage for new positions

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _percentage | uint256 | New reward percentage |

### pause

```solidity
function pause() external
```

Pause staking functionality

### unpause

```solidity
function unpause() external
```

Pause staking functionality

### _rewards

```solidity
function _rewards(address _staker, bool _forced) internal view returns (uint256, uint256, uint256)
```

Compute rewards and staked tokens for an address

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _staker | address | Address of the staker |
| _forced | bool | If true, counts staked tokens for every position. If not,             only checks for rewards eligible positions |

#### Return Values

| Name | Type | Description |
| ---- | ---- | ----------- |
| [0] | uint256 | totalRewards Rewards generated by the stakers |
| [1] | uint256 | totalStakedTokens Number of staked tokens by the staker |
| [2] | uint256 | tailPosition New tail position if the staker effectively unstake |

### _unstake

```solidity
function _unstake(address _staker, bool _forceUnstake) internal
```

Internal unstake

_Transfer accumulated rewards and also staked tokens_

#### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| _staker | address | Address of the staker |
| _forceUnstake | bool | If true, unstake every position (also the ones that              won't receive rewards) |

